<!DOCTYPE html>
<html class="no-js">

    <head>
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/popup.css">
        <!-- Insert this line above script imports  -->
        <script>if (typeof module === 'object') { window.module = module; module = undefined; }</script>
        <script src="js/libs/jquery.min.js"></script>
        <script src="js/libs/zip.min.js"></script>

        <script>
            // try also https://github.com/readium/readium-js-viewer
            function getParameterByName(name, url) {
                if (!url) {
                    url = window.location.href;
                }
                name = name.replace(/[\[\]]/g, "\\$&");
                let regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                    results = regex.exec(url);
                if (!results) return null;
                if (!results[2]) return '';
                return decodeURIComponent(results[2].replace(/\+/g, " "));
            }
            document.onreadystatechange = function () {
                if (document.readyState == "complete") {
                    window.reader = ePubReader(getParameterByName("file"), { restore: true });
                }
            };

        </script>

        <!-- File Storage -->
        <script src="js/libs/localforage.min.js"></script>

        <!-- Full Screen -->
        <script src="js/libs/screenfull.min.js"></script>

        <!-- Render -->
        <script src="js/epub.js"></script>

        <!-- Reader -->
        <script src="js/reader.js"></script>

        <!-- Plugins -->
        <script src="js/plugins/search.js"></script>

        <!-- Highlights
        <script src="js/libs/jquery.highlight.js"></script>
        <script src="js/hooks/extensions/highlight.js"></script>
        -->

        <!-- Insert this line after script imports -->
        <script>if (window.module) module = window.module;</script>
    </head>

    <body>
        <div id="sidebar">
            <div id="panels">
                <input id="searchBox" placeholder="search" type="search">

                <a id="show-Search" class="show_view icon-search" data-view="Search">Search</a>
                <a id="show-Toc" class="show_view icon-list-1 active" data-view="Toc">TOC</a>
                <a id="show-Bookmarks" class="show_view icon-bookmark" data-view="Bookmarks">Bookmarks</a>
                <!-- <a id="show-Notes" class="show_view icon-edit" data-view="Notes">Notes</a> -->

            </div>
            <div id="tocView" class="view">
            </div>
            <div id="searchView" class="view">
                <ul id="searchResults"></ul>
            </div>
            <div id="bookmarksView" class="view">
                <ul id="bookmarks"></ul>
            </div>
            <div id="notesView" class="view">
                <div id="new-note">
                    <textarea id="note-text"></textarea>
                    <button id="note-anchor">Anchor</button>
                </div>
                <ol id="notes"></ol>
            </div>
        </div>
        <div id="main">

            <div id="titlebar">
                <div id="opener">
                    <a id="slider" class="icon-menu">Menu</a>
                </div>
                <div id="metainfo">
                    <span id="book-title"></span>
                    <span id="title-seperator">&nbsp;&nbsp;–&nbsp;&nbsp;</span>
                    <span id="chapter-title"></span>
                </div>
                <div id="title-controls">
                    <a id="bookmark" class="icon-bookmark-empty">Bookmark</a>
                    <a id="setting" class="icon-cog">Settings</a>
                    <a id="fullscreen" class="icon-resize-full">Fullscreen</a>
                </div>
            </div>

            <div id="divider"></div>
            <div id="prev" class="arrow">‹</div>
            <div id="viewer"></div>
            <div id="next" class="arrow">›</div>

            <div id="loader"><img src="img/loader.gif"></div>
        </div>
        <div class="modal md-effect-1" id="settings-modal">
            <div class="md-content">
                <h3>Settings</h3>
                <div>
                    <p>
                        <input type="checkbox" id="sidebarReflow" name="sidebarReflow">Reflow text when sidebars are
                        open.
                    </p>
                </div>
                <div class="closer icon-cancel-circled"></div>
            </div>
        </div>
        <div class="overlay"></div>
    </body>

</html>